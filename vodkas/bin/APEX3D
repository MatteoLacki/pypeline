from docstr2argparse import foo2parser, parse_arguments
from vodkas.apex3d import apex3d

debug = True

parser = foo2parser(apex3d)
KWDS = dict(parse_arguments(apex3d))

del KWDS['--write_xml']
del KWDS['--write_binary']
del KWDS['--cuda']
for name, kwds in KWDS.items():
    parser.add_argument(name, **kwds)

parser.add_argument("--no_xml",
    dest="write_xml",
    action='store_const',
    const=False,
    default=True,
    help="Don't dump the output to an xml file.")
parser.add_argument("--no_binary",
    dest="write_binary",
    action='store_const',
    const=False,
    default=True,
    help="Don't dump the output into a binary format.")
parser.add_argument("--no_CUDA",
    dest="cuda",
    action='store_const',
    const=False,
    default=True,
    help="Don't use CUDA, Getruda (haha).")

args = parser.parse_args()
if debug:
    print(args.__dict__)

out_file, process = apex3d(**args)

if debug:
    print(out_file)
    print(process)